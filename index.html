<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"></script>

<script>
  window.onload = () => {
    let count = 0;
    let ws = new WebSocket(`ws://${location.host}`);
    //oTest.appendChild(newNode);
    ws.onopen = function (evt) {
      console.log("Connection open ...");
      test = () => {
        // 发送给服务端
        count += 1;
        ws.send(count);
      }

      // 接收服务端发送信息
      ws.onmessage = function (event) {
        let {
          data
        } = event || {}
        let listNode = document.getElementById('list');
        let newNode = document.createElement("li");
        newNode.innerText = data;
        console.log(listNode, 'newNode')
        listNode.appendChild(newNode);
        listNode = null;
        newNode = null;
      };
    };
  }
</script>

<body>
  <div onclick="test()">123</div>
  <ul id='list'></ul>
</body>

</html>